"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[324],{9915:(et,k,s)=>{s.r(k),s.d(k,{CalendarModule:()=>$e});var Y=s(5543),R=s(4847),g=s(688),h=s(7617),D=s(8915),I=s(4699),_=s(4113),Z=s(9618),u=s(823),x=s(1749),v=s(9018),T=s(8369),e=s(2741),l=s(8361);const p=s.n(l)()||l,J=new e.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function(){return{useUtc:!1}}});function L(a,i){const t=Array(a);for(let n=0;n<a;n++)t[n]=i(n);return t}let H=(()=>{class a extends g._A{constructor(t,n){super(),this._options=n,this.setLocale(t||p.locale())}setLocale(t){super.setLocale(t);let n=p.localeData(t);this._localeData={firstDayOfWeek:n.firstDayOfWeek(),longMonths:n.months(),shortMonths:n.monthsShort(),dates:L(31,r=>this.createDate(2017,0,r+1).format("D")),longDaysOfWeek:n.weekdays(),shortDaysOfWeek:n.weekdaysShort(),narrowDaysOfWeek:n.weekdaysMin()}}getYear(t){return this.clone(t).year()}getMonth(t){return this.clone(t).month()}getDate(t){return this.clone(t).date()}getDayOfWeek(t){return this.clone(t).day()}getMonthNames(t){return"long"==t?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(t){return"long"==t?this._localeData.longDaysOfWeek:"short"==t?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(t){return this.clone(t).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(t){return this.clone(t).daysInMonth()}clone(t){return t.clone().locale(this.locale)}createDate(t,n,r){const o=this._createMoment({year:t,month:n,date:r}).locale(this.locale);return o.isValid(),o}today(){return this._createMoment().locale(this.locale)}parse(t,n){return t&&"string"==typeof t?this._createMoment(t,n,this.locale):t?this._createMoment(t).locale(this.locale):null}format(t,n){return t=this.clone(t),this.isValid(t),t.format(n)}addCalendarYears(t,n){return this.clone(t).add({years:n})}addCalendarMonths(t,n){return this.clone(t).add({months:n})}addCalendarDays(t,n){return this.clone(t).add({days:n})}toIso8601(t){return this.clone(t).format()}deserialize(t){let n;if(t instanceof Date)n=this._createMoment(t).locale(this.locale);else if(this.isDateInstance(t))return this.clone(t);if("string"==typeof t){if(!t)return null;n=this._createMoment(t,p.ISO_8601).locale(this.locale)}return n&&this.isValid(n)?this._createMoment(n).locale(this.locale):super.deserialize(t)}isDateInstance(t){return p.isMoment(t)}isValid(t){return this.clone(t).isValid()}invalid(){return p.invalid()}_createMoment(t,n,r){const{strict:o,useUtc:d}=this._options||{};return d?p.utc(t,n,r,o):p(t,n,r,o)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(g.Ad,8),e.LFG(J,8))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a})(),j=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[{provide:g._A,useClass:H,deps:[g.Ad,J]}]}),a})();const X={parse:{dateInput:"l"},display:{dateInput:"l",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let q=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[{provide:g.sG,useValue:X}],imports:[[j]]}),a})();var $=s(3940),w=s(3045),M=s(2169),S=s(6759),E=s(8512),c=s(3324),N=s(2718),C=s(6006),O=s(1331),f=s(6274);const z=["matMonthView1"],K=["matMonthView2"],ee=["pickerPanelOrigin"],te=["pickerPanel"];function ne(a,i){if(1&a&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.range.startTime)}}function ae(a,i){if(1&a&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.range.endTime)}}function re(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"mat-form-field",20),e.TgZ(1,"input",21),e.NdJ("blur",function(r){return e.CHM(t),e.oxw(2).updateStartTime(r)}),e.qZA(),e.TgZ(2,"mat-label"),e._uU(3,"Start time"),e.qZA(),e.qZA()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("autocomplete","off")("formControl",t.startTimeFormControl)}}function oe(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"mat-form-field",22),e.TgZ(1,"input",23),e.NdJ("blur",function(r){return e.CHM(t),e.oxw(2).updateEndTime(r)}),e.qZA(),e.TgZ(2,"mat-label"),e._uU(3,"End time"),e.qZA(),e.qZA()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("formControl",t.endTimeFormControl)}}function ie(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.TgZ(3,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().prev()}),e._UZ(4,"mat-icon",12),e.qZA(),e.TgZ(5,"div",13),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"mat-month-view",14,15),e.NdJ("activeDateChange",function(r){return e.CHM(t),e.oxw().activeDates.month1=r})("click",function(r){return r.stopImmediatePropagation()})("selectedChange",function(r){return e.CHM(t),e.oxw().onSelectedDateChange(r)}),e.qZA(),e.qZA(),e.YNc(9,re,4,2,"mat-form-field",16),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"div",13),e._uU(14),e.qZA(),e.TgZ(15,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().next()}),e._UZ(16,"mat-icon",12),e.qZA(),e.qZA(),e.TgZ(17,"mat-month-view",14,18),e.NdJ("activeDateChange",function(r){return e.CHM(t),e.oxw().activeDates.month2=r})("click",function(r){return r.stopImmediatePropagation()})("selectedChange",function(r){return e.CHM(t),e.oxw().onSelectedDateChange(r)}),e.qZA(),e.qZA(),e.YNc(19,oe,4,1,"mat-form-field",19),e.qZA()}if(2&a){const t=e.oxw();e.xp6(4),e.Q6J("svgIcon","heroicons_outline:chevron-left"),e.xp6(2),e.Oqu(t.getMonthLabel(1)),e.xp6(1),e.Q6J("activeDate",t.activeDates.month1)("dateFilter",t.dateFilter())("dateClass",t.dateClass()),e.xp6(2),e.Q6J("ngIf",t.timeRange),e.xp6(5),e.Oqu(t.getMonthLabel(2)),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:chevron-right"),e.xp6(1),e.Q6J("activeDate",t.activeDates.month2)("dateFilter",t.dateFilter())("dateClass",t.dateClass()),e.xp6(2),e.Q6J("ngIf",t.timeRange)}}let le=(()=>{class a{constructor(t,n,r,o,d){this._changeDetectorRef=t,this._elementRef=n,this._overlay=r,this._renderer2=o,this._viewContainerRef=d,this.rangeChanged=new e.vpe,this._defaultClassNames=!0,this.activeDates={month1:null,month2:null},this.setWhichDate="start",this._range={start:null,end:null},this._timeRegExp=new RegExp("^(0[0-9]|1[0-9]|2[0-4]|[0-9]):([0-5][0-9])(A|(?:AM)|P|(?:PM))?$","i"),this._unsubscribeAll=new C.xQ,this._onChange=()=>{},this._onTouched=()=>{},this.dateFormat="DD/MM/YYYY",this.timeFormat="12",this._init()}set dateFormat(t){this._dateFormat!==t&&(this._dateFormat=t)}get dateFormat(){return this._dateFormat}set timeFormat(t){this._timeFormat!==t&&(this._timeFormat="12"===t?"hh:mmA":"HH:mm")}get timeFormat(){return this._timeFormat}set timeRange(t){this._timeRange!==t&&(this._timeRange=t,t||(this.range={start:this._range.start.clone().startOf("day"),end:this._range.end.clone().endOf("day")}))}get timeRange(){return this._timeRange}set range(t){if(!t)return;if(!t.start||!t.end)return void console.error('Range input must have "start" and "end" properties!');const n=t.whichDate||null,r=l(t.start),o=l(t.end);if("start"===n&&(this._range.start=r.clone(),this._range.start.isAfter(this._range.end))){const m=r.clone().hours(this._range.end.hours()).minutes(this._range.end.minutes()).seconds(this._range.end.seconds());this._range.end=this._range.start.isBefore(m)?m:r.clone()}if("end"===n&&(this._range.end=o.clone(),this._range.start.isAfter(this._range.end))){const m=o.clone().hours(this._range.start.hours()).minutes(this._range.start.minutes()).seconds(this._range.start.seconds());this._range.start=this._range.end.isAfter(m)?m:o.clone()}n||(this._range.start=r.clone(),this._range.end=r.isBefore(o)?o.clone():r.clone());const d={start:this._range.start.clone().toISOString(),end:this._range.end.clone().toISOString()};this.rangeChanged.emit(d),this._programmaticChange||(this._onTouched(d),this._onChange(d)),this.activeDates={month1:this._range.start.clone(),month2:this._range.start.clone().add(1,"month")},this.startTimeFormControl.setValue(this._range.start.clone().format(this._timeFormat).toString()),this.endTimeFormControl.setValue(this._range.end.clone().format(this._timeFormat).toString()),this._matMonthView1&&this._matMonthView2&&(this._matMonthView1.ngAfterContentInit(),this._matMonthView2.ngAfterContentInit()),this._programmaticChange=!1}get range(){const t=this._range.start.clone(),n=this._range.end.clone();return{startDate:t.clone().format(this.dateFormat),startTime:this.timeRange?t.clone().format(this.timeFormat):null,endDate:n.clone().format(this.dateFormat),endTime:this.timeRange?n.clone().format(this.timeFormat):null}}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}writeValue(t){this._programmaticChange=!0,this.range=t}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete(),this.writeValue=()=>{}}openPickerPanel(){const t=this._overlay.create({panelClass:"fuse-date-range-panel",backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.reposition(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._pickerPanelOrigin).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:8},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-8}])}),n=new N.UE(this._pickerPanel,this._viewContainerRef);t.backdropClick().subscribe(()=>{n&&n.isAttached&&n.detach(),t&&t.hasAttached()&&(t.detach(),t.dispose())}),t.attach(n)}getMonthLabel(t){return 1===t?this.activeDates.month1.clone().format("MMMM Y"):this.activeDates.month2.clone().format("MMMM Y")}dateClass(){return t=>t.isSame(this._range.start,"day")&&t.isSame(this._range.end,"day")?["fuse-date-range","fuse-date-range-start","fuse-date-range-end"]:t.isSame(this._range.start,"day")?["fuse-date-range","fuse-date-range-start"]:t.isSame(this._range.end,"day")?["fuse-date-range","fuse-date-range-end"]:t.isBetween(this._range.start,this._range.end,"day")?["fuse-date-range","fuse-date-range-mid"]:void 0}dateFilter(){return t=>!("end"===this.setWhichDate&&t.isBefore(this._range.start,"day"))}onSelectedDateChange(t){const n={start:this._range.start.clone().toISOString(),end:this._range.end.clone().toISOString(),whichDate:null};"start"===this.setWhichDate?n.start=l(n.start).year(t.year()).month(t.month()).date(t.date()).toISOString():n.end=l(n.end).year(t.year()).month(t.month()).date(t.date()).toISOString(),n.whichDate=this.setWhichDate,this.setWhichDate="start"===this.setWhichDate?"end":"start",this.range=n}prev(){this.activeDates.month1=l(this.activeDates.month1).subtract(1,"month"),this.activeDates.month2=l(this.activeDates.month2).subtract(1,"month")}next(){this.activeDates.month1=l(this.activeDates.month1).add(1,"month"),this.activeDates.month2=l(this.activeDates.month2).add(1,"month")}updateStartTime(t){const n=this._parseTime(t.target.value);if(this.startTimeFormControl.invalid){const o=this._range.start.clone().format(this._timeFormat);return void this.startTimeFormControl.setValue(o)}const r=this._range.start.clone().hours(n.hours()).minutes(n.minutes());if(r.isAfter(this._range.end)){const o=this._range.end.hours(),d=this._range.end.minutes();r.hours(o).minutes(d)}this.range={start:r.toISOString(),end:this._range.end.clone().toISOString(),whichDate:"start"}}updateEndTime(t){const n=this._parseTime(t.target.value);if(this.endTimeFormControl.invalid){const o=this._range.end.clone().format(this._timeFormat);return void this.endTimeFormControl.setValue(o)}const r=this._range.end.clone().hours(n.hours()).minutes(n.minutes());if(r.isBefore(this._range.start)){const o=this._range.start.hours(),d=this._range.start.minutes();r.hours(o).minutes(d)}this.range={start:this._range.start.clone().toISOString(),end:r.toISOString(),whichDate:"end"}}_init(){this.startTimeFormControl=new c.NI("",[c.kI.pattern(this._timeRegExp)]),this.endTimeFormControl=new c.NI("",[c.kI.pattern(this._timeRegExp)]),this._programmaticChange=!0,this.range={start:l().startOf("day").toISOString(),end:l().add(1,"day").endOf("day").toISOString()},this._programmaticChange=!0,this.timeRange=!0}_parseTime(t){return t.split(this._timeRegExp).filter(o=>""!==o)[2]?l(t,"hh:mmA").seconds(0):l(t,"HH:mm").seconds(0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(O.aV),e.Y36(e.Qsj),e.Y36(e.s_b))},a.\u0275cmp=e.Xpm({type:a,selectors:[["fuse-date-range"]],viewQuery:function(t,n){if(1&t&&(e.Gf(z,5),e.Gf(K,5),e.Gf(ee,5,e.SBq),e.Gf(te,5)),2&t){let r;e.iGM(r=e.CRH())&&(n._matMonthView1=r.first),e.iGM(r=e.CRH())&&(n._matMonthView2=r.first),e.iGM(r=e.CRH())&&(n._pickerPanelOrigin=r.first),e.iGM(r=e.CRH())&&(n._pickerPanel=r.first)}},hostVars:2,hostBindings:function(t,n){2&t&&e.ekj("fuse-date-range",n._defaultClassNames)},inputs:{dateFormat:"dateFormat",timeFormat:"timeFormat",timeRange:"timeRange",range:"range"},outputs:{rangeChanged:"rangeChanged"},exportAs:["fuseDateRange"],features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>a),multi:!0}])],decls:14,vars:4,consts:[[1,"range",3,"click"],["pickerPanelOrigin",""],[1,"start"],[1,"date"],["class","time",4,"ngIf"],[1,"separator"],[1,"end"],["pickerPanel",""],[1,"time"],[1,"month"],[1,"month-header"],["mat-icon-button","","tabindex","1",1,"previous-button",3,"click"],[3,"svgIcon"],[1,"month-label"],[3,"activeDate","dateFilter","dateClass","activeDateChange","click","selectedChange"],["matMonthView1",""],["class","fuse-mat-no-subscript time start-time",4,"ngIf"],["mat-icon-button","","tabindex","2",1,"next-button",3,"click"],["matMonthView2",""],["class","fuse-mat-no-subscript time end-time",4,"ngIf"],[1,"fuse-mat-no-subscript","time","start-time"],["matInput","","tabindex","3",3,"autocomplete","formControl","blur"],[1,"fuse-mat-no-subscript","time","end-time"],["matInput","","tabindex","4",3,"formControl","blur"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(){return n.openPickerPanel()}),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e.YNc(5,ne,2,1,"div",4),e.qZA(),e.TgZ(6,"div",5),e._uU(7,"-"),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div",3),e._uU(10),e.qZA(),e.YNc(11,ae,2,1,"div",4),e.qZA(),e.qZA(),e.YNc(12,ie,20,12,"ng-template",null,7,e.W1O)),2&t&&(e.xp6(4),e.Oqu(n.range.startDate),e.xp6(1),e.Q6J("ngIf",n.range.startTime),e.xp6(5),e.Oqu(n.range.endDate),e.xp6(1),e.Q6J("ngIf",n.range.endTime))},directives:[f.O5,h.lW,x.Hw,_.NW,u.KE,v.Nt,c.Fj,c.JJ,c.oH,u.hX],styles:['fuse-date-range{display:flex}fuse-date-range .range{display:flex;align-items:center;height:48px;min-height:48px;max-height:48px;cursor:pointer}fuse-date-range .range .start,fuse-date-range .range .end{display:flex;align-items:center;height:100%;padding:0 16px;border-radius:6px;border-width:1px;line-height:1}fuse-date-range .range .start,fuse-date-range .range .end{--tw-border-opacity: 1;border-color:rgba(203,213,225,var(--tw-border-opacity))}.dark fuse-date-range .range .start,.dark fuse-date-range .range .end{--tw-border-opacity: 1;border-color:rgba(100,116,139,var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgba(0,0,0,var(--tw-bg-opacity));--tw-bg-opacity: .05}fuse-date-range .range .start,fuse-date-range .range .end{--tw-shadow: 0 1px 2px 0 rgba(0, 0, 0, .05);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-date-range .range .start .date,fuse-date-range .range .end .date{white-space:nowrap}fuse-date-range .range .start .date+.time,fuse-date-range .range .end .date+.time{margin-left:8px}fuse-date-range .range .start .time,fuse-date-range .range .end .time{white-space:nowrap}fuse-date-range .range .separator{margin:0 2px}@media (min-width: 600px){fuse-date-range .range .separator{margin:0 12px}}.fuse-date-range-panel{border-radius:4px;padding:24px;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));--tw-shadow: 0 25px 50px -12px rgba(0, 0, 0, .25);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.fuse-date-range-panel .start,.fuse-date-range-panel .end{display:flex;flex-direction:column}.fuse-date-range-panel .start .month,.fuse-date-range-panel .end .month{max-width:196px;min-width:196px;width:196px}.fuse-date-range-panel .start .month .month-header,.fuse-date-range-panel .end .month .month-header{position:relative;display:flex;align-items:center;justify-content:center;height:32px;margin-bottom:16px}.fuse-date-range-panel .start .month .month-header .previous-button,.fuse-date-range-panel .start .month .month-header .next-button,.fuse-date-range-panel .end .month .month-header .previous-button,.fuse-date-range-panel .end .month .month-header .next-button{position:absolute;width:24px!important;height:24px!important;min-height:24px!important;max-height:24px!important;line-height:24px!important}.fuse-date-range-panel .start .month .month-header .previous-button .mat-icon,.fuse-date-range-panel .start .month .month-header .next-button .mat-icon,.fuse-date-range-panel .end .month .month-header .previous-button .mat-icon,.fuse-date-range-panel .end .month .month-header .next-button .mat-icon{width:1.25rem;height:1.25rem;min-width:1.25rem;min-height:1.25rem;font-size:1.25rem;line-height:1.25rem}.fuse-date-range-panel .start .month .month-header .previous-button .mat-icon svg,.fuse-date-range-panel .start .month .month-header .next-button .mat-icon svg,.fuse-date-range-panel .end .month .month-header .previous-button .mat-icon svg,.fuse-date-range-panel .end .month .month-header .next-button .mat-icon svg{width:1.25rem;height:1.25rem}.fuse-date-range-panel .start .month .month-header .previous-button,.fuse-date-range-panel .end .month .month-header .previous-button{left:0}.fuse-date-range-panel .start .month .month-header .next-button,.fuse-date-range-panel .end .month .month-header .next-button{right:0}.fuse-date-range-panel .start .month .month-header .month-label,.fuse-date-range-panel .end .month .month-header .month-label{font-weight:500}.fuse-date-range-panel .start .month .month-header .month-label,.fuse-date-range-panel .end .month .month-header .month-label{--tw-text-opacity: 1;color:rgba(var(--fuse-text-secondary-rgb),var(--tw-text-opacity))}.fuse-date-range-panel .start .month mat-month-view,.fuse-date-range-panel .end .month mat-month-view{display:flex;min-height:188px}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table{width:100%;border-collapse:collapse}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr[aria-hidden=true],.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr[aria-hidden=true]{display:none!important}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr:first-child td:first-child[aria-hidden=true],.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr:first-child td:first-child[aria-hidden=true]{visibility:hidden;pointer-events:none;opacity:0}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.fuse-date-range:before,.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td:hover.fuse-date-range:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.fuse-date-range:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td:hover.fuse-date-range:before{--tw-bg-opacity: 1;background-color:rgba(var(--fuse-primary-200-rgb),var(--tw-bg-opacity))}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.fuse-date-range .mat-calendar-body-cell-content,.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td:hover.fuse-date-range .mat-calendar-body-cell-content,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.fuse-date-range .mat-calendar-body-cell-content,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td:hover.fuse-date-range .mat-calendar-body-cell-content{background-color:transparent}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.fuse-date-range-start .mat-calendar-body-cell-content,.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.fuse-date-range-end .mat-calendar-body-cell-content,.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td:hover.fuse-date-range-start .mat-calendar-body-cell-content,.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td:hover.fuse-date-range-end .mat-calendar-body-cell-content,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.fuse-date-range-start .mat-calendar-body-cell-content,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.fuse-date-range-end .mat-calendar-body-cell-content,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td:hover.fuse-date-range-start .mat-calendar-body-cell-content,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td:hover.fuse-date-range-end .mat-calendar-body-cell-content{--tw-bg-opacity: 1;background-color:rgba(var(--fuse-primary-rgb),var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgba(var(--fuse-on-primary-rgb),var(--tw-text-opacity))}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td .mat-calendar-body-today,.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td:hover .mat-calendar-body-today,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td .mat-calendar-body-today,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td:hover .mat-calendar-body-today{border:none}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell{width:28px!important;height:28px!important;padding:2px!important}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range{position:relative}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range:before{content:"";position:absolute;top:2px;right:0;bottom:2px;left:0}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-start:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-start:before{left:2px;border-radius:999px 0 0 999px}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-start.fuse-date-range-end:before,.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-start:last-child:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-start.fuse-date-range-end:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-start:last-child:before{right:2px;border-radius:999px}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-end:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-end:before{right:2px;border-radius:0 999px 999px 0}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-end:first-child:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-end:first-child:before{left:2px;border-radius:999px}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range:first-child:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range:first-child:before{border-radius:999px 0 0 999px}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range:last-child:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell.fuse-date-range:last-child:before{border-radius:0 999px 999px 0}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell .mat-calendar-body-cell-content,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-cell .mat-calendar-body-cell-content{position:relative;top:0;left:0;width:24px;height:24px;font-size:12px}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-label+td.mat-calendar-body-cell.fuse-date-range:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-label+td.mat-calendar-body-cell.fuse-date-range:before{border-radius:999px 0 0 999px}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-label+td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-start.fuse-date-range-end,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-label+td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-start.fuse-date-range-end{border-radius:999px}.fuse-date-range-panel .start .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-label+td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-end:before,.fuse-date-range-panel .end .month mat-month-view .mat-calendar-table tbody tr td.mat-calendar-body-label+td.mat-calendar-body-cell.fuse-date-range.fuse-date-range-end:before{left:2px;border-radius:999px}.fuse-date-range-panel .start .time,.fuse-date-range-panel .end .time{width:100%;max-width:196px}.fuse-date-range-panel .start{align-items:flex-start;margin-right:20px}.fuse-date-range-panel .start .month .month-label{margin-left:8px}.fuse-date-range-panel .end{align-items:flex-end;margin-left:20px}.fuse-date-range-panel .end .month .month-label{margin-right:8px}\n'],encapsulation:2}),a})(),se=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[f.ez,c.UX,h.ot,_.FA,u.lN,v.c,x.Ps,q]]}),a})();var de=s(5349),ce=s(1855),me=s(7679),ue=s(4379),ge=s(372),fe=s(9421),he=s(9286),pe=s(3517),F=s(2925),_e=s(3760);const Q=function(a){return(0,_e.Z)(a,4)};var U=s(2201),ye=s(2014);var G=s(2114),b=s(7194),y=s(6727);function Ze(a,i){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-button-toggle",20),e._uU(2),e.qZA(),e.BQk()),2&a){const t=i.$implicit;e.xp6(1),e.Q6J("disableRipple",!0)("value",t.value)("matTooltip",t.label),e.xp6(1),e.hij(" ",t.abbr," ")}}function Te(a,i){if(1&a&&(e.TgZ(0,"div",16),e.TgZ(1,"div",17),e._uU(2,"Repeat on"),e.qZA(),e.TgZ(3,"mat-button-toggle-group",18),e.YNc(4,Ze,3,4,"ng-container",19),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.Q6J("formGroupName","weekly"),e.xp6(3),e.Q6J("formControlName","byDay")("multiple",!0),e.xp6(1),e.Q6J("ngForOf",t.weekdays)}}function Ce(a,i){if(1&a&&(e.TgZ(0,"div",21),e.TgZ(1,"mat-form-field",22),e.TgZ(2,"mat-label"),e._uU(3,"Repeat on"),e.qZA(),e.TgZ(4,"mat-select",6),e.TgZ(5,"mat-option",7),e._uU(6),e.qZA(),e.TgZ(7,"mat-option",7),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.Q6J("formGroupName","monthly"),e.xp6(4),e.Q6J("formControlName","repeatOn"),e.xp6(1),e.Q6J("value","date"),e.xp6(1),e.hij("Monthly on day ",t.recurrenceForm.get("monthly.date").value,""),e.xp6(1),e.Q6J("value","nthWeekday"),e.xp6(1),e.hij("Monthly on the ",t.nthWeekdayText,"")}}function Ae(a,i){if(1&a&&(e.TgZ(0,"mat-form-field",5),e._UZ(1,"input",23),e._UZ(2,"mat-datepicker-toggle",24),e._UZ(3,"mat-datepicker",null,25),e.qZA()),2&a){const t=e.MAs(4);e.xp6(1),e.Q6J("matDatepicker",t)("formControlName","until"),e.xp6(1),e.Q6J("for",t)}}function De(a,i){1&a&&(e.TgZ(0,"mat-form-field",5),e._UZ(1,"input",4),e.TgZ(2,"span",26),e._uU(3,"occurrence(s)"),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.Q6J("autocomplete","off")("formControlName","count")("min",1))}let Me=(()=>{class a{constructor(t,n,r,o){this.data=t,this.matDialogRef=n,this._calendarService=r,this._formBuilder=o,this._unsubscribeAll=new C.xQ}ngOnInit(){this._calendarService.weekdays$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(t=>{this.weekdays=t}),this._init(),this.recurrenceForm=this._formBuilder.group({freq:[null],interval:[null,c.kI.required],weekly:this._formBuilder.group({byDay:[[]]}),monthly:this._formBuilder.group({repeatOn:[null],date:[null],nthWeekday:[null]}),end:this._formBuilder.group({type:[null],until:[null],count:[null]})}),this.recurrenceForm.get("freq").valueChanges.subscribe(t=>{this._setEndValues(t)}),this.recurrenceForm.get("weekly.byDay").valueChanges.subscribe(t=>{const n=l(this.data.event.start);if(!t||!t.length){const r=n.format("dd").toUpperCase();this.recurrenceForm.get("weekly.byDay").setValue([r],{emitEvent:!1})}}),this.recurrenceForm.patchValue(this.recurrenceFormValues),this._setEndValues(this.recurrenceForm.get("freq").value)}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}clear(){this.matDialogRef.close({recurrence:"cleared"})}done(){const t=this.recurrenceForm.value,n=["FREQ="+t.freq,"INTERVAL="+t.interval];"MONTHLY"===t.freq&&"nthWeekday"===t.monthly.repeatOn&&n.push("BYDAY="+t.monthly.nthWeekday),"WEEKLY"===t.freq&&(Array.isArray(t.weekly.byDay)?n.push("BYDAY="+t.weekly.byDay.join(",")):n.push("BYDAY="+t.weekly.byDay)),"until"===t.end.type&&n.push("UNTIL="+l(t.end.until).endOf("day").utc().format("YYYYMMDD[T]HHmmss[Z]")),"count"===t.end.type&&n.push("COUNT="+t.end.count);const r=n.join(";");this.matDialogRef.close({recurrence:r})}_init(){const t=l(this.data.event.start),n=l(this.data.event.start).format("dd").toUpperCase();let r=1;for(;t.clone().isSame(t.clone().subtract(r,"week"),"month");)r++;const o=r+n;if(this.nthWeekdayText=o.slice(0,1)+{1:"st",2:"nd",3:"rd",4:"th",5:"th"}[o.slice(0,1)]+" "+this.weekdays.find(m=>m.value===o.slice(-2)).label,this.recurrenceFormValues={freq:"DAILY",interval:1,weekly:{byDay:n},monthly:{repeatOn:"date",date:l(this.data.event.start).date(),nthWeekday:o},end:{type:"never",until:null,count:null}},this.data.event.recurrence){const m={};this.data.event.recurrence.split(";").forEach(A=>{m[A.split("=")[0]]=A.split("=")[1]}),this.recurrenceFormValues.freq=m.FREQ,this.recurrenceFormValues.interval=m.INTERVAL,"WEEKLY"===m.FREQ&&(this.recurrenceFormValues.weekly.byDay=m.BYDAY.split(",")),"MONTHLY"===m.FREQ&&(this.recurrenceFormValues.monthly.repeatOn=m.BYDAY?"nthWeekday":"date"),this.recurrenceFormValues.end.type=m.UNTIL?"until":m.COUNT?"count":"never",this.recurrenceFormValues.end.until=m.UNTIL||null,this.recurrenceFormValues.end.count=m.COUNT||null}}_setEndValues(t){if(!t)return;const n=l(this.data.event.startDate),r=this.recurrenceForm.get("end.type").value;if("until"!==r){let o;"DAILY"===t&&(o=n.clone().add(1,"month").toISOString()),"WEEKLY"===t&&(o=n.clone().add(12,"weeks").toISOString()),"MONTHLY"===t&&(o=n.clone().add(12,"months").toISOString()),"YEARLY"===t&&(o=n.clone().add(5,"years").toISOString()),this.recurrenceForm.get("end.until").setValue(o)}if("count"!==r){let o;"DAILY"===t&&(o=30),("WEEKLY"===t||"MONTHLY"===t)&&(o=12),"YEARLY"===t&&(o=5),this.recurrenceForm.get("end.count").setValue(o)}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Z.WI),e.Y36(Z.so),e.Y36(y.o),e.Y36(c.qu))},a.\u0275cmp=e.Xpm({type:a,selectors:[["calendar-recurrence"]],decls:39,vars:21,consts:[[1,"flex","flex-col","w-full",3,"formGroup"],[1,"text-2xl","font-semibold","tracking-tight"],[1,"flex","mt-12"],[1,"fuse-mat-no-subscript","w-24","-mt-6"],["type","number","matInput","",3,"autocomplete","formControlName","min"],[1,"fuse-mat-no-subscript","w-40","ml-4"],[3,"formControlName"],[3,"value"],["class","flex flex-col mt-6",3,"formGroupName",4,"ngIf"],["class","flex mt-6",3,"formGroupName",4,"ngIf"],[1,"flex","flex-col","mt-12",3,"formGroupName"],[1,"flex","items-center"],["class","fuse-mat-no-subscript w-40 ml-4",4,"ngIf"],[1,"ml-auto","mt-8"],["mat-button","",1,"clear",3,"color","click"],["mat-flat-button","",3,"disabled","color","click"],[1,"flex","flex-col","mt-6",3,"formGroupName"],[1,"font-medium"],[1,"mt-1.5","border-0","space-x-1",3,"formControlName","multiple"],[4,"ngFor","ngForOf"],[1,"w-10","h-10","border-0","rounded-full",3,"disableRipple","value","matTooltip"],[1,"flex","mt-6",3,"formGroupName"],[1,"fuse-mat-no-subscript","w-full"],["matInput","",3,"matDatepicker","formControlName"],["matSuffix","",3,"for"],["untilDatePicker",""],["matSuffix",""]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"div",1),e._uU(2,"Recurrence rules"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"mat-form-field",3),e.TgZ(5,"mat-label"),e._uU(6,"Repeat every"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"mat-form-field",5),e.TgZ(9,"mat-select",6),e.TgZ(10,"mat-option",7),e._uU(11,"day(s)"),e.qZA(),e.TgZ(12,"mat-option",7),e._uU(13,"week(s)"),e.qZA(),e.TgZ(14,"mat-option",7),e._uU(15,"month(s)"),e.qZA(),e.TgZ(16,"mat-option",7),e._uU(17,"year(s)"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(18,Te,5,4,"div",8),e.YNc(19,Ce,9,6,"div",9),e.TgZ(20,"div",10),e.TgZ(21,"div",11),e.TgZ(22,"mat-form-field",3),e.TgZ(23,"mat-label"),e._uU(24,"Ends"),e.qZA(),e.TgZ(25,"mat-select",6),e.TgZ(26,"mat-option",7),e._uU(27,"Never"),e.qZA(),e.TgZ(28,"mat-option",7),e._uU(29,"On"),e.qZA(),e.TgZ(30,"mat-option",7),e._uU(31,"After"),e.qZA(),e.qZA(),e.qZA(),e.YNc(32,Ae,5,3,"mat-form-field",12),e.YNc(33,De,4,3,"mat-form-field",12),e.qZA(),e.qZA(),e.TgZ(34,"div",13),e.TgZ(35,"button",14),e.NdJ("click",function(){return n.clear()}),e._uU(36," Clear "),e.qZA(),e.TgZ(37,"button",15),e.NdJ("click",function(){return n.done()}),e._uU(38," Done "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.recurrenceForm),e.xp6(7),e.Q6J("autocomplete","off")("formControlName","interval")("min",1),e.xp6(2),e.Q6J("formControlName","freq"),e.xp6(1),e.Q6J("value","DAILY"),e.xp6(2),e.Q6J("value","WEEKLY"),e.xp6(2),e.Q6J("value","MONTHLY"),e.xp6(2),e.Q6J("value","YEARLY"),e.xp6(2),e.Q6J("ngIf","WEEKLY"===n.recurrenceForm.get("freq").value),e.xp6(1),e.Q6J("ngIf","MONTHLY"===n.recurrenceForm.get("freq").value),e.xp6(1),e.Q6J("formGroupName","end"),e.xp6(5),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","never"),e.xp6(2),e.Q6J("value","until"),e.xp6(2),e.Q6J("value","count"),e.xp6(2),e.Q6J("ngIf","until"===n.recurrenceForm.get("end.type").value),e.xp6(1),e.Q6J("ngIf","count"===n.recurrenceForm.get("end.type").value),e.xp6(2),e.Q6J("color","primary"),e.xp6(2),e.Q6J("disabled",n.recurrenceForm.invalid)("color","primary"))},directives:[c._Y,c.JL,c.sg,u.KE,u.hX,c.wV,c.qQ,v.Nt,c.Fj,c.JJ,c.u,w.gD,g.ey,f.O5,c.x0,h.lW,D.A9,f.sg,D.Yi,S.gM,_.hl,_.nW,u.R9,_.Mq],encapsulation:2}),a})();var Fe=s(2976),ke=s(9633);const Ye=["eventPanel"],Re=["fullCalendar"],Ie=["drawer"];function Je(a,i){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).changeEventPanelMode("edit","single")}),e._UZ(2,"mat-icon",6),e.qZA(),e.TgZ(3,"button",5),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return r.deleteEvent(r.event)}),e._UZ(4,"mat-icon",6),e.qZA(),e.BQk()}2&a&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function qe(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(4).changeEventPanelMode("edit","future")}),e._uU(1," This and following events "),e.qZA()}}function Se(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return r.deleteEvent(r.event,"future")}),e._uU(1," This and following events "),e.qZA()}}function Ee(a,i){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",38),e._UZ(2,"mat-icon",6),e.qZA(),e.TgZ(3,"mat-menu",null,39),e.TgZ(5,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).changeEventPanelMode("edit","single")}),e._uU(6," This event "),e.qZA(),e.YNc(7,qe,2,0,"button",40),e.TgZ(8,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).changeEventPanelMode("edit","all")}),e._uU(9," All events "),e.qZA(),e.qZA(),e.TgZ(10,"button",38),e._UZ(11,"mat-icon",6),e.qZA(),e.TgZ(12,"mat-menu",null,41),e.TgZ(14,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return r.deleteEvent(r.event,"single")}),e._uU(15," This event "),e.qZA(),e.YNc(16,Se,2,0,"button",40),e.TgZ(17,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return r.deleteEvent(r.event,"all")}),e._uU(18," All events "),e.qZA(),e.qZA(),e.BQk()}if(2&a){const t=e.MAs(4),n=e.MAs(13),r=e.oxw(3);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(5),e.Q6J("ngIf",!r.event.isFirstInstance),e.xp6(3),e.Q6J("matMenuTriggerFor",n),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(5),e.Q6J("ngIf",!r.event.isFirstInstance)}}function Ne(a,i){if(1&a&&(e.TgZ(0,"div",34),e._UZ(1,"mat-icon",6),e.TgZ(2,"div",42),e._uU(3),e.qZA(),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("svgIcon","heroicons_outline:menu-alt-2"),e.xp6(2),e.Oqu(t.event.description)}}function Oe(a,i){if(1&a&&(e.ynx(0),e.TgZ(1,"div",27),e.TgZ(2,"div",2),e._UZ(3,"mat-icon",6),e.TgZ(4,"div",28),e.TgZ(5,"div"),e.TgZ(6,"div",29),e._uU(7),e.qZA(),e.TgZ(8,"div",30),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"div",31),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"div",32),e.YNc(14,Je,5,2,"ng-container",26),e.YNc(15,Ee,19,6,"ng-container",26),e.qZA(),e.qZA(),e.qZA(),e.YNc(16,Ne,4,2,"div",33),e.TgZ(17,"div",34),e._UZ(18,"mat-icon",6),e.TgZ(19,"div",35),e._UZ(20,"div",36),e.TgZ(21,"div",37),e._uU(22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(3),e.Q6J("svgIcon","heroicons_outline:information-circle"),e.xp6(4),e.Oqu(t.event.title||"(No title)"),e.xp6(2),e.Oqu(e.xi3(10,10,t.event.start,"EEEE, MMMM d")),e.xp6(3),e.Oqu(t.recurrenceStatus),e.xp6(2),e.Q6J("ngIf",!t.event.recurrence),e.xp6(1),e.Q6J("ngIf",t.event.recurrence),e.xp6(1),e.Q6J("ngIf",t.event.description),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:calendar"),e.xp6(2),e.Q6J("ngClass",t.getCalendar(t.event.calendarId).color),e.xp6(2),e.Oqu(t.getCalendar(t.event.calendarId).title)}}function Qe(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"div",54),e._UZ(1,"mat-icon",66),e.TgZ(2,"div",67),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).openRecurrenceDialog()}),e.TgZ(3,"div",50),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh"),e.xp6(3),e.hij(" ",t.recurrenceStatus||"Does not repeat"," ")}}function Ue(a,i){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-option",15),e.TgZ(2,"div",68),e._UZ(3,"span",57),e.TgZ(4,"span",58),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&a){const t=i.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(2),e.Q6J("ngClass",t.color),e.xp6(2),e.Oqu(t.title)}}function Ge(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).addEvent()}),e._uU(1," Add "),e.qZA()}2&a&&e.Q6J("color","primary")}function Pe(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).updateEvent()}),e._uU(1," Save "),e.qZA()}2&a&&e.Q6J("color","primary")}function Ve(a,i){if(1&a&&(e.ynx(0),e.TgZ(1,"form",43),e.TgZ(2,"div",44),e._UZ(3,"mat-icon",45),e.TgZ(4,"mat-form-field",46),e._UZ(5,"input",47),e.qZA(),e.qZA(),e.TgZ(6,"div",48),e._UZ(7,"mat-icon",49),e.TgZ(8,"div",50),e._UZ(9,"fuse-date-range",51),e.TgZ(10,"mat-checkbox",52),e._uU(11," All day "),e.qZA(),e.qZA(),e.qZA(),e.YNc(12,Qe,5,2,"div",53),e.TgZ(13,"div",54),e._UZ(14,"mat-icon",45),e.TgZ(15,"mat-form-field",46),e.TgZ(16,"mat-select",55),e.NdJ("change",function(n){return n.stopImmediatePropagation()}),e.TgZ(17,"mat-select-trigger",56),e._UZ(18,"span",57),e.TgZ(19,"span",58),e._uU(20),e.qZA(),e.qZA(),e.YNc(21,Ue,6,3,"ng-container",59),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",48),e._UZ(23,"mat-icon",60),e.TgZ(24,"mat-form-field",61),e.TgZ(25,"textarea",62),e._uU(26,"                                    "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",63),e.YNc(28,Ge,2,1,"button",64),e.YNc(29,Pe,2,1,"button",65),e.qZA(),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);let n,r;e.xp6(1),e.Q6J("formGroup",t.eventForm),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(2),e.Q6J("formControlName","title")("placeholder","Event title"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:calendar"),e.xp6(2),e.Q6J("formControlName","range")("dateFormat",t.settings.dateFormat)("timeRange",!t.eventForm.get("allDay").value)("timeFormat",t.settings.timeFormat),e.xp6(1),e.Q6J("color","primary")("formControlName","allDay"),e.xp6(2),e.Q6J("ngIf",!t.event.recurrence||"single"!==t.eventEditMode),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:tag"),e.xp6(2),e.Q6J("formControlName","calendarId"),e.xp6(2),e.Q6J("ngClass",null==(n=t.getCalendar(t.eventForm.get("calendarId").value))?null:n.color),e.xp6(2),e.Oqu(null==(r=t.getCalendar(t.eventForm.get("calendarId").value))?null:r.title),e.xp6(1),e.Q6J("ngForOf",t.calendars),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:menu-alt-2"),e.xp6(2),e.Q6J("matAutosizeMinRows",1)("formControlName","description")("placeholder","Event description"),e.xp6(3),e.Q6J("ngIf","add"===t.panelMode),e.xp6(1),e.Q6J("ngIf","edit"===t.panelMode)}}function We(a,i){if(1&a&&(e.YNc(0,Oe,23,13,"ng-container",26),e.YNc(1,Ve,30,23,"ng-container",26)),2&a){const t=e.oxw();e.Q6J("ngIf","view"===t.panelMode),e.xp6(1),e.Q6J("ngIf","add"===t.panelMode||"edit"===t.panelMode)}}let Le=(()=>{class a{constructor(t,n,r,o,d,m,A,ze,Ke){this._calendarService=t,this._changeDetectorRef=n,this._document=r,this._formBuilder=o,this._matDialog=d,this._overlay=m,this._fuseMediaWatcherService=A,this._viewContainerRef=ze,this.utilitiesService=Ke,this.calendarPlugins=[me.ZP,ge.ZP,ue.Z,fe.ZP,he.Z,pe.ZP],this.drawerMode="side",this.drawerOpened=!0,this.eventEditMode="single",this.events=[],this.panelMode="view",this.view="dayGridMonth",this._unsubscribeAll=new C.xQ,this.allAppointments=[]}get recurrenceStatus(){const t=this.eventForm.get("recurrence").value;if(!t)return null;let n=G.Ci.fromString(t).toText();return n=n.charAt(0).toUpperCase()+n.slice(1),n}ngOnInit(){this.getAllAppointments(),this.eventForm=this._formBuilder.group({id:[""],calendarId:[""],recurringEventId:[null],title:[""],description:[""],start:[null],end:[null],duration:[null],allDay:[!0],recurrence:[null],range:[{}]}),this.eventForm.get("range").valueChanges.subscribe(t=>{if(t)if(this.eventForm.get("start").setValue(t.start,{emitEvent:!1}),this.eventForm.get("recurrence").value){this._updateRecurrenceRule();const n=l(t.end).diff(l(t.start),"minutes");this.eventForm.get("duration").setValue(n,{emitEvent:!1}),this._updateEndValue()}else this.eventForm.get("end").setValue(t.end,{emitEvent:!1})}),this.eventForm.get("recurrence").valueChanges.subscribe(t=>{t&&this._updateEndValue()}),this._calendarService.calendars$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(t=>{this.calendars=t,this._changeDetectorRef.markForCheck()}),this._calendarService.events$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(t=>{this.events=(0,F.Z)(t),this._changeDetectorRef.markForCheck()}),this._calendarService.settings$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(t=>{this.settings=t,this.eventTimeFormat={hour:"12"===t.timeFormat?"numeric":"2-digit",hour12:"12"===t.timeFormat,minute:"2-digit",meridiem:"12"===t.timeFormat&&"short"},this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{t.includes("md")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1),this._changeDetectorRef.markForCheck()}),this.views={dayGridMonth:{eventLimit:3,eventTimeFormat:this.eventTimeFormat,fixedWeekCount:!1},timeGrid:{allDayText:"",columnHeaderFormat:{weekday:"short",day:"numeric",omitCommas:!0},columnHeaderHtml:t=>`<span class="fc-weekday">${l(t).format("ddd")}</span>\n                                                       <span class="fc-date">${l(t).format("D")}</span>`,slotDuration:"01:00:00",slotLabelFormat:this.eventTimeFormat},timeGridWeek:{},timeGridDay:{},listYear:{allDayText:"All day",eventTimeFormat:this.eventTimeFormat,listDayFormat:!1,listDayAltFormat:!1}}}ngAfterViewInit(){this._fullCalendarApi=this._fullCalendar.getApi(),this.viewTitle=this._fullCalendarApi.view.title;const t=l(this._fullCalendarApi.view.currentStart).subtract(60,"days"),n=l(this._fullCalendarApi.view.currentEnd).add(60,"days");this._calendarService.getEvents(t,n,!0).subscribe()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete(),this._eventPanelOverlayRef&&this._eventPanelOverlayRef.dispose()}toggleDrawer(){this._drawer.toggle()}openRecurrenceDialog(){this._matDialog.open(Me,{panelClass:"calendar-event-recurrence-dialog",data:{event:this.eventForm.value}}).afterClosed().subscribe(n=>{!n||!n.recurrence||this.eventForm.get("recurrence").value!==n.recurrence&&("cleared"===n.recurrence?this.eventForm.get("recurrence").setValue(null):this.eventForm.get("recurrence").setValue(n.recurrence))})}changeEventPanelMode(t,n="single"){this.panelMode=t,this.eventEditMode=n,setTimeout(()=>{this._eventPanelOverlayRef.updatePosition()})}getCalendar(t){if(t)return this.calendars.find(n=>n.id===t)}changeView(t){this.view=t,this._fullCalendarApi&&(this._fullCalendarApi.changeView(t),this.viewTitle=this._fullCalendarApi.view.title)}previous(){this._fullCalendarApi.prev(),this.viewTitle=this._fullCalendarApi.view.title;const t=l(this._fullCalendarApi.view.currentStart);this._calendarService.prefetchPastEvents(t).subscribe()}today(){this._fullCalendarApi.today(),this.viewTitle=this._fullCalendarApi.view.title}next(){this._fullCalendarApi.next(),this.viewTitle=this._fullCalendarApi.view.title;const t=l(this._fullCalendarApi.view.currentEnd);this._calendarService.prefetchFutureEvents(t).subscribe()}onDateClick(t){const n={appointmentID:null,id:null,calendarId:this.calendars[0].id,recurringEventId:null,isFirstInstance:!1,title:"",description:"",start:l(t.date).startOf("day").toISOString(),end:l(t.date).endOf("day").toISOString(),duration:null,allDay:!0,recurrence:null,range:{start:l(t.date).startOf("day").toISOString(),end:l(t.date).endOf("day").toISOString()}};this.event=n,t.el=t.dayEl,this.eventForm.reset(),this.eventForm.patchValue(n),this._openEventPanel(t),this.changeEventPanelMode("add")}onEventClick(t){const n=(0,F.Z)(this.allAppointments.find(o=>o.appointmentID===t.event._def.extendedProps.appointmentID));let r;this.event=n,r=n.recuringEventId?l(n.start).add(n.duration,"minutes").toISOString():n.end,n.range={start:n.start,end:r},this.eventForm.reset(),this.eventForm.patchValue(n),this._openEventPanel(t)}onEventRender(t){const n=this.calendars.find(r=>r.id===t.event.extendedProps.calendarId);if(n){if("listYear"===this.view){const r=`<td class="fc-list-item-date">\n                                            <span>\n                                                <span>${l(t.event.start).format("D")}</span>\n                                                <span>${l(t.event.start).format("MMM")}, ${l(t.event.start).format("ddd")}</span>\n                                            </span>\n                                        </td>`;t.el.insertAdjacentHTML("afterbegin",r),t.el.getElementsByClassName("fc-event-dot")[0].classList.add(n.color),t.event.title||(t.el.querySelector(".fc-list-item-title").innerText="(No title)")}else t.el.classList.add(n.color),t.event.title||(t.el.querySelector(".fc-title").innerText="(No title)");t.el.style.display=n.visible?"flex":"none"}}onCalendarUpdated(t){this._fullCalendarApi.rerenderEvents()}addEvent(){let t=Q(this.eventForm.value);t.recurrence&&(t.duration=l(t.range.end).diff(l(t.range.start),"minutes")),t=(0,U.Z)(t,["range","recurringEventId"]),this._calendarService.addEvent(t).subscribe(()=>{this._calendarService.reloadEvents().subscribe(),this._closeEventPanel()})}updateEvent(){let t=Q(this.eventForm.value);const r=(0,ce._T)(t,["range"]),o=this.events.find(d=>d.id===t.id);if(function(a,i){return(0,ye.Z)(a,i)}(r,o))this._closeEventPanel();else if(t.recurrence&&t.recurringEventId)this._calendarService.updateRecurringEvent(t,o,this.eventEditMode).subscribe(()=>{this._calendarService.reloadEvents().subscribe(),this._closeEventPanel()});else{if(t.recurrence||t.recurringEventId)return t.recurrence&&!t.recurringEventId?(t.duration=l(t.range.end).diff(l(t.range.start),"minutes"),t=(0,U.Z)(t,["range","recurringEventId"]),void this._calendarService.updateEvent(t.id,t).subscribe(()=>{this._calendarService.reloadEvents().subscribe(),this._closeEventPanel()})):void(!t.recurrence&&t.recurringEventId&&(t.end=l(t.start).add(t.duration,"minutes").toISOString(),t.duration=null,this._calendarService.updateRecurringEvent(t,o,this.eventEditMode).subscribe(()=>{this._calendarService.reloadEvents().subscribe(),this._closeEventPanel()})));this._calendarService.updateEvent(t.id,t).subscribe(()=>{this._closeEventPanel()})}}deleteEvent(t,n="single"){t.recurrence?this._calendarService.deleteRecurringEvent(t,n).subscribe(()=>{this._calendarService.reloadEvents().subscribe(),this._closeEventPanel()}):this._calendarService.deleteEvent(t.id).subscribe(()=>{this._closeEventPanel()})}_createEventPanelOverlay(t){this._eventPanelOverlayRef=this._overlay.create({panelClass:["calendar-event-panel"],backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.reposition(),positionStrategy:t}),this._eventPanelOverlayRef.backdropClick().subscribe(()=>{this._closeEventPanel()})}_openEventPanel(t){const n=this._overlay.position().flexibleConnectedTo(t.el).withFlexibleDimensions(!1).withPositions([{originX:"end",originY:"top",overlayX:"start",overlayY:"top",offsetX:8},{originX:"start",originY:"top",overlayX:"end",overlayY:"top",offsetX:-8},{originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom",offsetX:-8},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom",offsetX:8}]);this._eventPanelOverlayRef?this._eventPanelOverlayRef.updatePositionStrategy(n):this._createEventPanelOverlay(n),this._eventPanelOverlayRef.attach(new N.UE(this._eventPanel,this._viewContainerRef)),this._changeDetectorRef.markForCheck()}_closeEventPanel(){this._eventPanelOverlayRef.detach(),this.panelMode="view",this.eventEditMode="single",this._changeDetectorRef.markForCheck()}_updateRecurrenceRule(){const t=this.eventForm.value;if(!t.recurrence)return;const n={};if(t.recurrence.split(";").forEach(d=>{const m=d.split("=");n[m[0]]=m[1]}),n.BYDAY&&(n.BYDAY=n.BYDAY.split(",")),"DAILY"===n.FREQ||"WEEKLY"===n.FREQ&&n.BYDAY.length>1||"MONTHLY"===n.FREQ&&!n.BYDAY||"YEARLY"===n.FREQ)return;if("WEEKLY"===n.FREQ&&(n.BYDAY=[l(t.start).format("dd").toUpperCase()]),"MONTHLY"===n.FREQ){const d=l(t.start).format("dd").toUpperCase();let m=1;for(;l(t.start).isSame(l(t.start).subtract(m,"week"),"month");)m++;n.BYDAY=[m+d]}const r=[];Object.keys(n).forEach(d=>{r.push(d+"="+(Array.isArray(n[d])?n[d].join(","):n[d]))});const o=r.join(";");this.eventForm.get("recurrence").setValue(o)}_updateEndValue(){const t=this.eventForm.get("recurrence").value;if(!t)return;const n={};if(t.split(";").forEach(r=>{const o=r.split("=");n[o[0]]=o[1]}),n.UNTIL)this.eventForm.get("end").setValue(n.UNTIL);else if(n.COUNT){const r="DTSTART="+l(this.eventForm.get("start").value).utc().format("YYYYMMDD[T]HHmmss[Z]")+"\nRRULE:"+t,o=G.Ci.fromString(r).all();this.eventForm.get("end").setValue(l(o[o.length-1]).toISOString())}else this.eventForm.get("end").setValue(l().year(9999).endOf("year").toISOString())}getAllAppointments(){this.utilitiesService.getAllAppointments().subscribe(t=>{if(t){this.allAppointments=[],new Date(t[0].createdDate+t[0].slotTime);for(var o=0;o<t.length;o++)this.allAppointments.push({appointmentID:t[o].appointmentID,id:"d2220429-9214-4c4b-9da6-f8da2fbfd507",calendarId:"1a470c8e-40ed-4c2d-b590-a4f1f6ead6cc",title:t[o].patient,description:t[o].serviceName,start:t[o].createdDate,end:t[o].createdDate,duration:0,allDay:!1,recurrence:"FREQ=MONTHLY;INTERVAL=1;BYDAY=1TU"});this.allAppointments=(0,F.Z)(this.allAppointments),this._changeDetectorRef.markForCheck()}},()=>{})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.o),e.Y36(e.sBO),e.Y36(f.K0),e.Y36(c.qu),e.Y36(Z.uw),e.Y36(O.aV),e.Y36(Fe.T),e.Y36(e.s_b),e.Y36(ke.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["calendar"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ye,5),e.Gf(Re,5),e.Gf(Ie,5)),2&t){let r;e.iGM(r=e.CRH())&&(n._eventPanel=r.first),e.iGM(r=e.CRH())&&(n._fullCalendar=r.first),e.iGM(r=e.CRH())&&(n._drawer=r.first)}},decls:59,vars:27,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden","dark:bg-gray-900"],[1,"flex-auto","h-full","bg-transparent"],[1,"flex"],[1,"flex","flex-col","flex-auto"],[1,"flex","flex-0","flex-wrap","items-center","p-4","border-b","bg-card"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"ml-4","text-2xl","font-semibold","tracking-tight","whitespace-nowrap"],["mat-icon-button","",1,"ml-5",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-icon-button","",1,"hidden","md:inline-flex",3,"click"],[1,"hidden","md:block","ml-auto"],[1,"fuse-mat-dense","fuse-mat-no-subscript","w-30","ml-2"],[3,"value","selectionChange"],["viewChanger","matSelect"],[3,"value"],[1,"md:hidden","ml-auto"],["mat-icon-button","",1,"",3,"matMenuTriggerFor"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"matMenuTriggerFor"],["actionsViewsMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],[3,"defaultView","events","firstDay","handleWindowResize","header","height","plugins","views","dateClick","eventClick","eventRender"],["fullCalendar",""],["eventPanel",""],[4,"ngIf"],[1,"flex-auto","p-8"],[1,"flex","flex-auto","justify-between","ml-6"],[1,"text-3xl","font-semibold","tracking-tight","leading-none"],[1,"mt-0.5","text-secondary"],[1,"text-secondary"],[1,"flex","-mt-2","-mr-2","ml-10"],["class","flex mt-6",4,"ngIf"],[1,"flex","mt-6"],[1,"flex","flex-auto","items-center","ml-6"],[1,"w-2","h-2","rounded-full",3,"ngClass"],[1,"ml-3","leading-none"],["mat-icon-button","",3,"matMenuTriggerFor"],["editMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["deleteMenu","matMenu"],[1,"flex-auto","ml-6"],[1,"flex","flex-col","w-full","p-6","pt-8","sm:pt-10","sm:pr-8",3,"formGroup"],[1,"flex","items-center"],[1,"hidden","sm:inline-flex","mr-6",3,"svgIcon"],[1,"fuse-mat-no-subscript","flex-auto"],["matInput","",3,"formControlName","placeholder"],[1,"flex","items-start","mt-6"],[1,"hidden","sm:inline-flex","mt-3","mr-6",3,"svgIcon"],[1,"flex-auto"],[3,"formControlName","dateFormat","timeRange","timeFormat"],[1,"mt-4",3,"color","formControlName"],["class","flex items-center mt-6",4,"ngIf"],[1,"flex","items-center","mt-6"],[3,"formControlName","change"],[1,"inline-flex","items-center","leading-none"],[1,"w-3","h-3","rounded-full",3,"ngClass"],[1,"ml-3"],[4,"ngFor","ngForOf"],[1,"hidden","sm:inline-flex","mr-6","mt-3",3,"svgIcon"],[1,"fuse-mat-textarea","fuse-mat-no-subscript","flex-auto"],["matInput","","matTextareaAutosize","",3,"matAutosizeMinRows","formControlName","placeholder"],[1,"ml-auto","mt-6"],["class","add","mat-flat-button","","type","button",3,"color","click",4,"ngIf"],["class","save","mat-flat-button","","type","button",3,"color","click",4,"ngIf"],[1,"hidden","sm:inline-flex","mr-6","transform","-scale-x-1",3,"svgIcon"],[1,"flex","flex-auto","items-center","h-12","px-4","rounded-md","border","cursor-pointer","shadow-sm","border-gray-300","dark:bg-black","dark:bg-opacity-5","dark:border-gray-500",3,"click"],[1,"inline-flex","items-center"],["mat-flat-button","","type","button",1,"add",3,"color","click"],["mat-flat-button","","type","button",1,"save",3,"color","click"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"mat-drawer-container",1),e.TgZ(2,"mat-drawer-content",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.NdJ("click",function(){return n.toggleDrawer()}),e._UZ(6,"mat-icon",6),e.qZA(),e.TgZ(7,"div",7),e._uU(8),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return n.previous()}),e._UZ(10,"mat-icon",9),e.qZA(),e.TgZ(11,"button",5),e.NdJ("click",function(){return n.next()}),e._UZ(12,"mat-icon",9),e.qZA(),e.TgZ(13,"button",10),e.NdJ("click",function(){return n.today()}),e._UZ(14,"mat-icon",6),e.qZA(),e.TgZ(15,"div",11),e.TgZ(16,"mat-form-field",12),e.TgZ(17,"mat-select",13,14),e.NdJ("selectionChange",function(){e.CHM(r);const d=e.MAs(18);return n.changeView(d.value)}),e.TgZ(19,"mat-option",15),e._uU(20,"Month"),e.qZA(),e.TgZ(21,"mat-option",15),e._uU(22,"Week"),e.qZA(),e.TgZ(23,"mat-option",15),e._uU(24,"Day"),e.qZA(),e.TgZ(25,"mat-option",15),e._uU(26,"Schedule"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",16),e.TgZ(28,"button",17),e._UZ(29,"mat-icon",6),e.TgZ(30,"mat-menu",null,18),e.TgZ(32,"button",19),e.NdJ("click",function(){return n.today()}),e._UZ(33,"mat-icon",6),e.TgZ(34,"span"),e._uU(35,"Go to today"),e.qZA(),e.qZA(),e.TgZ(36,"button",20),e._UZ(37,"mat-icon",6),e.TgZ(38,"span"),e._uU(39,"View"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"mat-menu",null,21),e.TgZ(42,"button",22),e.NdJ("click",function(){return n.changeView("dayGridMonth")}),e.TgZ(43,"span"),e._uU(44,"Month"),e.qZA(),e.qZA(),e.TgZ(45,"button",22),e.NdJ("click",function(){return n.changeView("timeGridWeek")}),e.TgZ(46,"span"),e._uU(47,"Week"),e.qZA(),e.qZA(),e.TgZ(48,"button",22),e.NdJ("click",function(){return n.changeView("timeGridDay")}),e.TgZ(49,"span"),e._uU(50,"Day"),e.qZA(),e.qZA(),e.TgZ(51,"button",22),e.NdJ("click",function(){return n.changeView("listYear")}),e.TgZ(52,"span"),e._uU(53,"Schedule"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(54,"div",3),e.TgZ(55,"full-calendar",23,24),e.NdJ("dateClick",function(d){return n.onDateClick(d)})("eventClick",function(d){return n.onEventClick(d)})("eventRender",function(d){return n.onEventRender(d)}),e.qZA(),e.qZA(),e.YNc(57,We,2,2,"ng-template",null,25,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const r=e.MAs(31),o=e.MAs(41);e.xp6(6),e.Q6J("svgIcon","heroicons_outline:menu"),e.xp6(2),e.hij(" ",n.viewTitle," "),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:calendar"),e.xp6(3),e.Q6J("value",n.view),e.xp6(2),e.Q6J("value","dayGridMonth"),e.xp6(2),e.Q6J("value","timeGridWeek"),e.xp6(2),e.Q6J("value","timeGridDay"),e.xp6(2),e.Q6J("value","listYear"),e.xp6(3),e.Q6J("matMenuTriggerFor",r),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:dots-vertical"),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:calendar"),e.xp6(3),e.Q6J("matMenuTriggerFor",o),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:view-grid"),e.xp6(5),e.Q6J("disabled","dayGridMonth"===n.view),e.xp6(3),e.Q6J("disabled","timeGridWeek"===n.view),e.xp6(3),e.Q6J("disabled","timeGridDay"===n.view),e.xp6(3),e.Q6J("disabled","listYear"===n.view),e.xp6(4),e.Q6J("defaultView",n.view)("events",n.allAppointments)("firstDay",n.settings.startWeekOn)("handleWindowResize",!1)("header",!1)("height","parent")("plugins",n.calendarPlugins)("views",n.views)}},directives:[M.kh,M.LW,h.lW,x.Hw,u.KE,w.gD,g.ey,T.p6,T.VK,T.OP,E.w,f.O5,f.mk,c._Y,c.JL,c.sg,v.Nt,c.Fj,c.JJ,c.u,le,I.oG,w.$L,f.sg,v.D7],pipes:[f.uU],styles:["calendar full-calendar{display:flex;flex-direction:column;flex:1 0 auto;width:100%;height:100%}calendar full-calendar .fc-view-container{display:flex;flex-direction:column;flex:1 0 auto;width:100%;height:100%}calendar full-calendar .fc-view-container .fc-view.fc-dayGridMonth-view,calendar full-calendar .fc-view-container .fc-view.fc-timeGridWeek-view,calendar full-calendar .fc-view-container .fc-view.fc-timeGridDay-view{display:flex;flex-direction:column;flex:1 0 auto;width:100%;height:100%}calendar full-calendar .fc-view-container .fc-view.fc-dayGridMonth-view>table,calendar full-calendar .fc-view-container .fc-view.fc-timeGridWeek-view>table,calendar full-calendar .fc-view-container .fc-view.fc-timeGridDay-view>table{display:flex;flex-direction:column;flex:1 0 auto;height:100%}calendar full-calendar .fc-view-container .fc-view.fc-dayGridMonth-view>table>thead,calendar full-calendar .fc-view-container .fc-view.fc-timeGridWeek-view>table>thead,calendar full-calendar .fc-view-container .fc-view.fc-timeGridDay-view>table>thead{display:flex}calendar full-calendar .fc-view-container .fc-view.fc-dayGridMonth-view>table>tbody,calendar full-calendar .fc-view-container .fc-view.fc-timeGridWeek-view>table>tbody,calendar full-calendar .fc-view-container .fc-view.fc-timeGridDay-view>table>tbody{display:flex;flex:1 1 auto;overflow:hidden}calendar full-calendar .fc-view-container .fc-view.fc-dayGridMonth-view>table>tbody>tr,calendar full-calendar .fc-view-container .fc-view.fc-timeGridWeek-view>table>tbody>tr,calendar full-calendar .fc-view-container .fc-view.fc-timeGridDay-view>table>tbody>tr{display:flex}calendar full-calendar .fc-view-container .fc-view.fc-dayGridMonth-view>table>tbody>tr>td,calendar full-calendar .fc-view-container .fc-view.fc-timeGridWeek-view>table>tbody>tr>td,calendar full-calendar .fc-view-container .fc-view.fc-timeGridDay-view>table>tbody>tr>td{display:flex;flex-direction:column}calendar full-calendar .fc-view-container .fc-view.fc-dayGridMonth-view>table>tbody>tr>td .fc-scroller,calendar full-calendar .fc-view-container .fc-view.fc-timeGridWeek-view>table>tbody>tr>td .fc-scroller,calendar full-calendar .fc-view-container .fc-view.fc-timeGridDay-view>table>tbody>tr>td .fc-scroller{flex:1 1 auto;overflow:hidden scroll!important;height:auto!important}calendar full-calendar .fc-view-container .fc-view.fc-dayGridMonth-view>table>tbody>tr>td .fc-scroller{display:flex}calendar full-calendar .fc-view-container .fc-view.fc-dayGridMonth-view>table>tbody>tr>td .fc-scroller>.fc-day-grid{display:flex;flex-direction:column;min-height:580px}calendar full-calendar .fc-view-container .fc-view.fc-dayGridMonth-view>table>tbody>tr>td .fc-scroller>.fc-day-grid>.fc-row{flex:1 0 0;height:auto!important}calendar full-calendar .fc-view-container .fc-view.fc-listYear-view{width:100%;height:100%}calendar full-calendar .fc-view-container .fc-view.fc-listYear-view .fc-scroller{width:100%;height:100%!important;overflow:hidden!important}.calendar-event-panel{border-radius:8px;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));--tw-shadow: 0 25px 50px -12px rgba(0, 0, 0, .25);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}\n"],encapsulation:2,changeDetection:0}),a})();const He=function(){return[".."]};let Be=(()=>{class a{constructor(t,n,r){this._calendarService=t,this._changeDetectorRef=n,this._formBuilder=r,this._unsubscribeAll=new C.xQ}get year(){return(new Date).getFullYear().toString()}ngOnInit(){this.settingsForm=this._formBuilder.group({dateFormat:[""],timeFormat:[""],startWeekOn:[""]}),this._calendarService.settings$.pipe((0,b.R)(this._unsubscribeAll)).subscribe(t=>{this.settingsForm.patchValue(t),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}updateSettings(){this._calendarService.updateSettings(this.settingsForm.value).subscribe(n=>{this.settingsForm.reset(n)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.o),e.Y36(e.sBO),e.Y36(c.qu))},a.\u0275cmp=e.Xpm({type:a,selectors:[["calendar-settings"]],decls:41,vars:22,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-auto"],[1,"flex","items-center","h-16","px-4","sm:px-6","py-2","border-b"],["mat-icon-button","",3,"routerLink"],[3,"svgIcon"],[1,"ml-1","text-lg","font-medium"],[1,"flex","flex-auto","p-6","sm:p-8"],[1,"flex","flex-col","w-full","max-w-xs",3,"formGroup"],[1,"w-full"],[3,"formControlName"],[3,"value"],["mat-flat-button","",1,"mt-4",3,"color","disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"a",3),e._UZ(4,"mat-icon",4),e.qZA(),e.TgZ(5,"div",5),e._uU(6,"Settings"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"form",7),e.TgZ(9,"mat-form-field",8),e.TgZ(10,"mat-label"),e._uU(11,"Date format"),e.qZA(),e.TgZ(12,"mat-select",9),e.TgZ(13,"mat-option",10),e._uU(14),e.qZA(),e.TgZ(15,"mat-option",10),e._uU(16),e.qZA(),e.TgZ(17,"mat-option",10),e._uU(18),e.qZA(),e.TgZ(19,"mat-option",10),e._uU(20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"mat-form-field",8),e.TgZ(22,"mat-label"),e._uU(23,"Time format"),e.qZA(),e.TgZ(24,"mat-select",9),e.TgZ(25,"mat-option",10),e._uU(26,"1:00pm"),e.qZA(),e.TgZ(27,"mat-option",10),e._uU(28,"13:30"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"mat-form-field",8),e.TgZ(30,"mat-label"),e._uU(31,"Start week on"),e.qZA(),e.TgZ(32,"mat-select",9),e.TgZ(33,"mat-option",10),e._uU(34,"Saturday"),e.qZA(),e.TgZ(35,"mat-option",10),e._uU(36,"Sunday"),e.qZA(),e.TgZ(37,"mat-option",10),e._uU(38,"Monday"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"button",11),e.NdJ("click",function(){return n.updateSettings()}),e._uU(40," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("routerLink",e.DdM(21,He)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:arrow-narrow-left"),e.xp6(4),e.Q6J("formGroup",n.settingsForm),e.xp6(4),e.Q6J("formControlName","dateFormat"),e.xp6(1),e.Q6J("value","ll"),e.xp6(1),e.hij("Aug 20, ",n.year,""),e.xp6(1),e.Q6J("value","MM/DD/YYYY"),e.xp6(1),e.hij("12/31/",n.year,""),e.xp6(1),e.Q6J("value","DD/MM/YYYY"),e.xp6(1),e.hij("31/12/",n.year,""),e.xp6(1),e.Q6J("value","YYYY-MM-DD"),e.xp6(1),e.hij("",n.year,"-12-31"),e.xp6(4),e.Q6J("formControlName","timeFormat"),e.xp6(1),e.Q6J("value","12"),e.xp6(2),e.Q6J("value","24"),e.xp6(5),e.Q6J("formControlName","startWeekOn"),e.xp6(1),e.Q6J("value",6),e.xp6(2),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("color","primary")("disabled",n.settingsForm.invalid||n.settingsForm.pristine))},directives:[R.PQ,h.zs,Y.yS,x.Hw,c._Y,c.JL,c.sg,u.KE,u.hX,w.gD,c.JJ,c.u,g.ey,h.lW],encapsulation:2,changeDetection:0}),a})(),je=(()=>{class a{constructor(t){this._calendarService=t}resolve(t,n){return this._calendarService.getCalendars()}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(y.o))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),P=(()=>{class a{constructor(t){this._calendarService=t}resolve(t,n){return this._calendarService.getSettings()}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(y.o))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Xe=[{path:"",component:Le,resolve:{calendars:je,settings:P,weekdays:(()=>{class a{constructor(t){this._calendarService=t}resolve(t,n){return this._calendarService.getWeekdays()}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(y.o))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}},{path:"settings",component:Be,resolve:{settings:P}}];let $e=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[{provide:g.sG,useValue:{parse:{dateInput:"DD.MM.YYYY"},display:{dateInput:"DD.MM.YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"DD.MM.YYYY",monthYearA11yLabel:"MMMM YYYY"}}}],imports:[[Y.Bz.forChild(Xe),R.Cl,h.ot,D.vV,I.p9,_.FA,Z.Is,u.lN,x.Ps,v.c,T.Tx,q,$.Fk,w.LD,M.SJ,S.AV,E.z,se,de.m]]}),a})()}}]);